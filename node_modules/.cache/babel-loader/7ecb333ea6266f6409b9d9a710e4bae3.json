{"ast":null,"code":"import * as React from 'react';\nimport { useState, useContext, useRef, useLayoutEffect, createContext } from 'react';\nimport { useFrame } from '@react-three/fiber';\nconst context = /*#__PURE__*/createContext(null);\n\nfunction PerformanceMonitor({\n  iterations = 10,\n  ms = 250,\n  threshold = 0.75,\n  step = 0.1,\n  factor: _factor = 0.5,\n  flipflops = Infinity,\n  bounds = refreshrate => refreshrate > 100 ? [60, 100] : [40, 60],\n  onIncline,\n  onDecline,\n  onChange,\n  onFallback,\n  children\n}) {\n  const decimalPlacesRatio = Math.pow(10, 0);\n  const [api, _] = useState(() => ({\n    fps: 0,\n    index: 0,\n    factor: _factor,\n    flipped: 0,\n    refreshrate: 0,\n    fallback: false,\n    frames: [],\n    averages: [],\n    subscriptions: new Map(),\n    subscribe: ref => {\n      const key = Symbol();\n      api.subscriptions.set(key, ref.current);\n      return () => void api.subscriptions.delete(key);\n    }\n  }));\n  let lastFactor = 0;\n  useFrame(() => {\n    const {\n      frames,\n      averages\n    } = api; // If the fallback has been reached do not continue running samples\n\n    if (api.fallback) return;\n\n    if (averages.length < iterations) {\n      frames.push(performance.now());\n      const msPassed = frames[frames.length - 1] - frames[0];\n\n      if (msPassed >= ms) {\n        api.fps = Math.round(frames.length / msPassed * 1000 * decimalPlacesRatio) / decimalPlacesRatio;\n        api.refreshrate = Math.max(api.refreshrate, api.fps);\n        averages[api.index++ % iterations] = api.fps;\n\n        if (averages.length === iterations) {\n          const [lower, upper] = bounds(api.refreshrate);\n          const upperBounds = averages.filter(value => value >= upper);\n          const lowerBounds = averages.filter(value => value < lower); // Trigger incline when more than -threshold- avgs exceed the upper bound\n\n          if (upperBounds.length > iterations * threshold) {\n            api.factor = Math.min(1, api.factor + step);\n            api.flipped++;\n            if (onIncline) onIncline(api);\n            api.subscriptions.forEach(value => value.onIncline && value.onIncline(api));\n          } // Trigger decline when more than -threshold- avgs are below the lower bound\n\n\n          if (lowerBounds.length > iterations * threshold) {\n            api.factor = Math.max(0, api.factor - step);\n            api.flipped++;\n            if (onDecline) onDecline(api);\n            api.subscriptions.forEach(value => value.onDecline && value.onDecline(api));\n          }\n\n          if (lastFactor !== api.factor) {\n            lastFactor = api.factor;\n            if (onChange) onChange(api);\n            api.subscriptions.forEach(value => value.onChange && value.onChange(api));\n          }\n\n          if (api.flipped > flipflops && !api.fallback) {\n            api.fallback = true;\n            if (onFallback) onFallback(api);\n            api.subscriptions.forEach(value => value.onFallback && value.onFallback(api));\n          }\n\n          api.averages = []; // Resetting the refreshrate creates more problems than it solves atm\n          // api.refreshrate = 0\n        }\n\n        api.frames = [];\n      }\n    }\n  });\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api\n  }, children);\n}\n\nfunction usePerformanceMonitor({\n  onIncline,\n  onDecline,\n  onChange,\n  onFallback\n}) {\n  const api = useContext(context);\n  const ref = useRef({\n    onIncline,\n    onDecline,\n    onChange,\n    onFallback\n  });\n  useLayoutEffect(() => {\n    ref.current.onIncline = onIncline;\n    ref.current.onDecline = onDecline;\n    ref.current.onChange = onChange;\n    ref.current.onFallback = onFallback;\n  }, [onIncline, onDecline, onChange, onFallback]);\n  useLayoutEffect(() => api.subscribe(ref), [api]);\n}\n\nexport { PerformanceMonitor, usePerformanceMonitor };","map":{"version":3,"sources":["/Users/osamakhan/Desktop/Apple-Website-Clone-React-master/node_modules/@react-three/drei/core/PerformanceMonitor.js"],"names":["React","useState","useContext","useRef","useLayoutEffect","createContext","useFrame","context","PerformanceMonitor","iterations","ms","threshold","step","factor","_factor","flipflops","Infinity","bounds","refreshrate","onIncline","onDecline","onChange","onFallback","children","decimalPlacesRatio","Math","pow","api","_","fps","index","flipped","fallback","frames","averages","subscriptions","Map","subscribe","ref","key","Symbol","set","current","delete","lastFactor","length","push","performance","now","msPassed","round","max","lower","upper","upperBounds","filter","value","lowerBounds","min","forEach","createElement","Provider","usePerformanceMonitor"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useState, useContext, useRef, useLayoutEffect, createContext } from 'react';\nimport { useFrame } from '@react-three/fiber';\n\nconst context = /*#__PURE__*/createContext(null);\nfunction PerformanceMonitor({\n  iterations = 10,\n  ms = 250,\n  threshold = 0.75,\n  step = 0.1,\n  factor: _factor = 0.5,\n  flipflops = Infinity,\n  bounds = refreshrate => refreshrate > 100 ? [60, 100] : [40, 60],\n  onIncline,\n  onDecline,\n  onChange,\n  onFallback,\n  children\n}) {\n  const decimalPlacesRatio = Math.pow(10, 0);\n  const [api, _] = useState(() => ({\n    fps: 0,\n    index: 0,\n    factor: _factor,\n    flipped: 0,\n    refreshrate: 0,\n    fallback: false,\n    frames: [],\n    averages: [],\n    subscriptions: new Map(),\n    subscribe: ref => {\n      const key = Symbol();\n      api.subscriptions.set(key, ref.current);\n      return () => void api.subscriptions.delete(key);\n    }\n  }));\n  let lastFactor = 0;\n  useFrame(() => {\n    const {\n      frames,\n      averages\n    } = api; // If the fallback has been reached do not continue running samples\n\n    if (api.fallback) return;\n\n    if (averages.length < iterations) {\n      frames.push(performance.now());\n      const msPassed = frames[frames.length - 1] - frames[0];\n\n      if (msPassed >= ms) {\n        api.fps = Math.round(frames.length / msPassed * 1000 * decimalPlacesRatio) / decimalPlacesRatio;\n        api.refreshrate = Math.max(api.refreshrate, api.fps);\n        averages[api.index++ % iterations] = api.fps;\n\n        if (averages.length === iterations) {\n          const [lower, upper] = bounds(api.refreshrate);\n          const upperBounds = averages.filter(value => value >= upper);\n          const lowerBounds = averages.filter(value => value < lower); // Trigger incline when more than -threshold- avgs exceed the upper bound\n\n          if (upperBounds.length > iterations * threshold) {\n            api.factor = Math.min(1, api.factor + step);\n            api.flipped++;\n            if (onIncline) onIncline(api);\n            api.subscriptions.forEach(value => value.onIncline && value.onIncline(api));\n          } // Trigger decline when more than -threshold- avgs are below the lower bound\n\n\n          if (lowerBounds.length > iterations * threshold) {\n            api.factor = Math.max(0, api.factor - step);\n            api.flipped++;\n            if (onDecline) onDecline(api);\n            api.subscriptions.forEach(value => value.onDecline && value.onDecline(api));\n          }\n\n          if (lastFactor !== api.factor) {\n            lastFactor = api.factor;\n            if (onChange) onChange(api);\n            api.subscriptions.forEach(value => value.onChange && value.onChange(api));\n          }\n\n          if (api.flipped > flipflops && !api.fallback) {\n            api.fallback = true;\n            if (onFallback) onFallback(api);\n            api.subscriptions.forEach(value => value.onFallback && value.onFallback(api));\n          }\n\n          api.averages = []; // Resetting the refreshrate creates more problems than it solves atm\n          // api.refreshrate = 0\n        }\n\n        api.frames = [];\n      }\n    }\n  });\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api\n  }, children);\n}\nfunction usePerformanceMonitor({\n  onIncline,\n  onDecline,\n  onChange,\n  onFallback\n}) {\n  const api = useContext(context);\n  const ref = useRef({\n    onIncline,\n    onDecline,\n    onChange,\n    onFallback\n  });\n  useLayoutEffect(() => {\n    ref.current.onIncline = onIncline;\n    ref.current.onDecline = onDecline;\n    ref.current.onChange = onChange;\n    ref.current.onFallback = onFallback;\n  }, [onIncline, onDecline, onChange, onFallback]);\n  useLayoutEffect(() => api.subscribe(ref), [api]);\n}\n\nexport { PerformanceMonitor, usePerformanceMonitor };\n"]},"metadata":{},"sourceType":"module"}