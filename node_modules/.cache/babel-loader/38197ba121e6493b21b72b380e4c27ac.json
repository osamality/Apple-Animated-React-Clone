{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector3 } from 'three';\nimport Node from '../core/Node.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\n\nclass Object3DNode extends Node {\n  constructor(scope = Object3DNode.VIEW_MATRIX, object3d = null) {\n    super();\n    this.scope = scope;\n    this.object3d = object3d;\n    this.updateType = NodeUpdateType.Object;\n    this._uniformNode = new UniformNode(null);\n  }\n\n  getNodeType() {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      return 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      return 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      return 'vec3';\n    }\n  }\n\n  update(frame) {\n    const object = this.object3d !== null ? this.object3d : frame.object;\n    const uniformNode = this._uniformNode;\n    const camera = frame.camera;\n    const scope = this.scope;\n\n    if (scope === Object3DNode.VIEW_MATRIX) {\n      uniformNode.value = object.modelViewMatrix;\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      uniformNode.value = object.normalMatrix;\n    } else if (scope === Object3DNode.WORLD_MATRIX) {\n      uniformNode.value = object.matrixWorld;\n    } else if (scope === Object3DNode.POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n    } else if (scope === Object3DNode.VIEW_POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n      uniformNode.value.applyMatrix4(camera.matrixWorldInverse);\n    }\n  }\n\n  generate(builder) {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      this._uniformNode.nodeType = 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      this._uniformNode.nodeType = 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      this._uniformNode.nodeType = 'vec3';\n      this._uniformNode.value = new Vector3();\n    }\n\n    return this._uniformNode.build(builder);\n  }\n\n  serialize(data) {\n    super.serialize(data);\n    data.scope = this.scope;\n  }\n\n  deserialize(data) {\n    super.deserialize(data);\n    this.scope = data.scope;\n  }\n\n}\n\n_defineProperty(Object3DNode, \"VIEW_MATRIX\", 'viewMatrix');\n\n_defineProperty(Object3DNode, \"NORMAL_MATRIX\", 'normalMatrix');\n\n_defineProperty(Object3DNode, \"WORLD_MATRIX\", 'worldMatrix');\n\n_defineProperty(Object3DNode, \"POSITION\", 'position');\n\n_defineProperty(Object3DNode, \"VIEW_POSITION\", 'viewPosition');\n\nexport default Object3DNode;","map":{"version":3,"sources":["/Users/osamakhan/Desktop/Apple-Website-Clone-React-master/node_modules/three-stdlib/nodes/accessors/Object3DNode.js"],"names":["_defineProperty","Vector3","Node","UniformNode","NodeUpdateType","Object3DNode","constructor","scope","VIEW_MATRIX","object3d","updateType","Object","_uniformNode","getNodeType","WORLD_MATRIX","NORMAL_MATRIX","POSITION","VIEW_POSITION","update","frame","object","uniformNode","camera","value","modelViewMatrix","normalMatrix","matrixWorld","setFromMatrixPosition","applyMatrix4","matrixWorldInverse","generate","builder","nodeType","build","serialize","data","deserialize"],"mappings":"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","sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector3 } from 'three';\nimport Node from '../core/Node.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\n\nclass Object3DNode extends Node {\n  constructor(scope = Object3DNode.VIEW_MATRIX, object3d = null) {\n    super();\n    this.scope = scope;\n    this.object3d = object3d;\n    this.updateType = NodeUpdateType.Object;\n    this._uniformNode = new UniformNode(null);\n  }\n\n  getNodeType() {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      return 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      return 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      return 'vec3';\n    }\n  }\n\n  update(frame) {\n    const object = this.object3d !== null ? this.object3d : frame.object;\n    const uniformNode = this._uniformNode;\n    const camera = frame.camera;\n    const scope = this.scope;\n\n    if (scope === Object3DNode.VIEW_MATRIX) {\n      uniformNode.value = object.modelViewMatrix;\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      uniformNode.value = object.normalMatrix;\n    } else if (scope === Object3DNode.WORLD_MATRIX) {\n      uniformNode.value = object.matrixWorld;\n    } else if (scope === Object3DNode.POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n    } else if (scope === Object3DNode.VIEW_POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n      uniformNode.value.applyMatrix4(camera.matrixWorldInverse);\n    }\n  }\n\n  generate(builder) {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      this._uniformNode.nodeType = 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      this._uniformNode.nodeType = 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      this._uniformNode.nodeType = 'vec3';\n      this._uniformNode.value = new Vector3();\n    }\n\n    return this._uniformNode.build(builder);\n  }\n\n  serialize(data) {\n    super.serialize(data);\n    data.scope = this.scope;\n  }\n\n  deserialize(data) {\n    super.deserialize(data);\n    this.scope = data.scope;\n  }\n\n}\n\n_defineProperty(Object3DNode, \"VIEW_MATRIX\", 'viewMatrix');\n\n_defineProperty(Object3DNode, \"NORMAL_MATRIX\", 'normalMatrix');\n\n_defineProperty(Object3DNode, \"WORLD_MATRIX\", 'worldMatrix');\n\n_defineProperty(Object3DNode, \"POSITION\", 'position');\n\n_defineProperty(Object3DNode, \"VIEW_POSITION\", 'viewPosition');\n\nexport default Object3DNode;\n"]},"metadata":{},"sourceType":"module"}