{"ast":null,"code":"import { c as createEvents, e as extend, u as useMutableCallback, a as createRoot, i as isRef, E as ErrorBoundary, B as Block, b as useIsomorphicLayoutEffect, d as unmountComponentAtNode } from './index-27a1523b.esm.js';\nexport { t as ReactThreeFiber, w as _roots, v as act, o as addAfterEffect, n as addEffect, p as addTail, m as advance, j as applyProps, f as context, c as createEvents, g as createPortal, a as createRoot, k as dispose, e as extend, q as flushGlobalEffects, s as getRootState, l as invalidate, h as reconciler, r as render, d as unmountComponentAtNode, A as useFrame, C as useGraph, x as useInstanceHandle, D as useLoader, y as useStore, z as useThree } from './index-27a1523b.esm.js';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport useMeasure from 'react-use-measure';\nimport { FiberProvider, useContextBridge } from 'its-fine';\nimport 'react-reconciler/constants';\nimport 'zustand';\nimport 'react-reconciler';\nimport 'scheduler';\nimport 'suspend-react';\nconst DOM_EVENTS = {\n  onClick: ['click', false],\n  onContextMenu: ['contextmenu', false],\n  onDoubleClick: ['dblclick', false],\n  onWheel: ['wheel', true],\n  onPointerDown: ['pointerdown', true],\n  onPointerUp: ['pointerup', true],\n  onPointerLeave: ['pointerleave', true],\n  onPointerMove: ['pointermove', true],\n  onPointerCancel: ['pointercancel', true],\n  onLostPointerCapture: ['lostpointercapture', true]\n};\n/** Default R3F event manager for web */\n\nfunction createPointerEvents(store) {\n  const {\n    handlePointer\n  } = createEvents(store);\n  return {\n    priority: 1,\n    enabled: true,\n\n    compute(event, state, previous) {\n      // https://github.com/pmndrs/react-three-fiber/pull/782\n      // Events trigger outside of canvas when moved, use offsetX/Y by default and allow overrides\n      state.pointer.set(event.offsetX / state.size.width * 2 - 1, -(event.offsetY / state.size.height) * 2 + 1);\n      state.raycaster.setFromCamera(state.pointer, state.camera);\n    },\n\n    connected: undefined,\n    handlers: Object.keys(DOM_EVENTS).reduce((acc, key) => ({ ...acc,\n      [key]: handlePointer(key)\n    }), {}),\n    connect: target => {\n      var _events$handlers;\n\n      const {\n        set,\n        events\n      } = store.getState();\n      events.disconnect == null ? void 0 : events.disconnect();\n      set(state => ({\n        events: { ...state.events,\n          connected: target\n        }\n      }));\n      Object.entries((_events$handlers = events.handlers) != null ? _events$handlers : []).forEach(([name, event]) => {\n        const [eventName, passive] = DOM_EVENTS[name];\n        target.addEventListener(eventName, event, {\n          passive\n        });\n      });\n    },\n    disconnect: () => {\n      const {\n        set,\n        events\n      } = store.getState();\n\n      if (events.connected) {\n        var _events$handlers2;\n\n        Object.entries((_events$handlers2 = events.handlers) != null ? _events$handlers2 : []).forEach(([name, event]) => {\n          if (events && events.connected instanceof HTMLElement) {\n            const [eventName] = DOM_EVENTS[name];\n            events.connected.removeEventListener(eventName, event);\n          }\n        });\n        set(state => ({\n          events: { ...state.events,\n            connected: undefined\n          }\n        }));\n      }\n    }\n  };\n}\n\nconst CanvasImpl = /*#__PURE__*/React.forwardRef(function Canvas({\n  children,\n  fallback,\n  resize,\n  style,\n  gl,\n  events = createPointerEvents,\n  eventSource,\n  eventPrefix,\n  shadows,\n  linear,\n  flat,\n  legacy,\n  orthographic,\n  frameloop,\n  dpr,\n  performance,\n  raycaster,\n  camera,\n  onPointerMissed,\n  onCreated,\n  ...props\n}, forwardedRef) {\n  // Create a known catalogue of Threejs-native elements\n  // This will include the entire THREE namespace by default, users can extend\n  // their own elements by using the createRoot API instead\n  React.useMemo(() => extend(THREE), []);\n  const Bridge = useContextBridge();\n  const [containerRef, containerRect] = useMeasure({\n    scroll: true,\n    debounce: {\n      scroll: 50,\n      resize: 0\n    },\n    ...resize\n  });\n  const canvasRef = React.useRef(null);\n  const divRef = React.useRef(null);\n  const [canvas, setCanvas] = React.useState(null);\n  React.useImperativeHandle(forwardedRef, () => canvasRef.current);\n  const handlePointerMissed = useMutableCallback(onPointerMissed);\n  const [block, setBlock] = React.useState(false);\n  const [error, setError] = React.useState(false); // Suspend this component if block is a promise (2nd run)\n\n  if (block) throw block; // Throw exception outwards if anything within canvas throws\n\n  if (error) throw error;\n  const root = React.useRef(null);\n\n  if (containerRect.width > 0 && containerRect.height > 0 && canvas) {\n    if (!root.current) root.current = createRoot(canvas);\n    root.current.configure({\n      gl,\n      events,\n      shadows,\n      linear,\n      flat,\n      legacy,\n      orthographic,\n      frameloop,\n      dpr,\n      performance,\n      raycaster,\n      camera,\n      size: containerRect,\n      // Pass mutable reference to onPointerMissed so it's free to update\n      onPointerMissed: (...args) => handlePointerMissed.current == null ? void 0 : handlePointerMissed.current(...args),\n      onCreated: state => {\n        // Connect to event source\n        state.events.connect == null ? void 0 : state.events.connect(eventSource ? isRef(eventSource) ? eventSource.current : eventSource : divRef.current); // Set up compute function\n\n        if (eventPrefix) {\n          state.setEvents({\n            compute: (event, state) => {\n              const x = event[eventPrefix + 'X'];\n              const y = event[eventPrefix + 'Y'];\n              state.pointer.set(x / state.size.width * 2 - 1, -(y / state.size.height) * 2 + 1);\n              state.raycaster.setFromCamera(state.pointer, state.camera);\n            }\n          });\n        } // Call onCreated callback\n\n\n        onCreated == null ? void 0 : onCreated(state);\n      }\n    });\n    root.current.render( /*#__PURE__*/React.createElement(Bridge, null, /*#__PURE__*/React.createElement(ErrorBoundary, {\n      set: setError\n    }, /*#__PURE__*/React.createElement(React.Suspense, {\n      fallback: /*#__PURE__*/React.createElement(Block, {\n        set: setBlock\n      })\n    }, children))));\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    setCanvas(canvasRef.current);\n  }, []);\n  React.useEffect(() => {\n    if (canvas) return () => unmountComponentAtNode(canvas);\n  }, [canvas]); // When the event source is not this div, we need to set pointer-events to none\n  // Or else the canvas will block events from reaching the event source\n\n  const pointerEvents = eventSource ? 'none' : 'auto';\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: divRef,\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      pointerEvents,\n      ...style\n    }\n  }, props), /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    style: {\n      width: '100%',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      display: 'block'\n    }\n  }, fallback)));\n});\n/**\n * A DOM canvas which accepts threejs elements as children.\n * @see https://docs.pmnd.rs/react-three-fiber/api/canvas\n */\n\nconst Canvas = /*#__PURE__*/React.forwardRef(function CanvasWrapper(props, ref) {\n  return /*#__PURE__*/React.createElement(FiberProvider, null, /*#__PURE__*/React.createElement(CanvasImpl, _extends({}, props, {\n    ref: ref\n  })));\n});\nexport { Canvas, createPointerEvents as events };","map":{"version":3,"sources":["/Users/osamakhan/Desktop/Apple-Website-Clone-React-master/node_modules/@react-three/fiber/dist/react-three-fiber.esm.js"],"names":["c","createEvents","e","extend","u","useMutableCallback","a","createRoot","i","isRef","E","ErrorBoundary","B","Block","b","useIsomorphicLayoutEffect","d","unmountComponentAtNode","t","ReactThreeFiber","w","_roots","v","act","o","addAfterEffect","n","addEffect","p","addTail","m","advance","j","applyProps","f","context","g","createPortal","k","dispose","q","flushGlobalEffects","s","getRootState","l","invalidate","h","reconciler","r","render","A","useFrame","C","useGraph","x","useInstanceHandle","D","useLoader","y","useStore","z","useThree","_extends","React","THREE","useMeasure","FiberProvider","useContextBridge","DOM_EVENTS","onClick","onContextMenu","onDoubleClick","onWheel","onPointerDown","onPointerUp","onPointerLeave","onPointerMove","onPointerCancel","onLostPointerCapture","createPointerEvents","store","handlePointer","priority","enabled","compute","event","state","previous","pointer","set","offsetX","size","width","offsetY","height","raycaster","setFromCamera","camera","connected","undefined","handlers","Object","keys","reduce","acc","key","connect","target","_events$handlers","events","getState","disconnect","entries","forEach","name","eventName","passive","addEventListener","_events$handlers2","HTMLElement","removeEventListener","CanvasImpl","forwardRef","Canvas","children","fallback","resize","style","gl","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","onPointerMissed","onCreated","props","forwardedRef","useMemo","Bridge","containerRef","containerRect","scroll","debounce","canvasRef","useRef","divRef","canvas","setCanvas","useState","useImperativeHandle","current","handlePointerMissed","block","setBlock","error","setError","root","configure","args","setEvents","createElement","Suspense","useEffect","pointerEvents","ref","position","overflow","display","CanvasWrapper"],"mappings":"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","sourcesContent":["import { c as createEvents, e as extend, u as useMutableCallback, a as createRoot, i as isRef, E as ErrorBoundary, B as Block, b as useIsomorphicLayoutEffect, d as unmountComponentAtNode } from './index-27a1523b.esm.js';\nexport { t as ReactThreeFiber, w as _roots, v as act, o as addAfterEffect, n as addEffect, p as addTail, m as advance, j as applyProps, f as context, c as createEvents, g as createPortal, a as createRoot, k as dispose, e as extend, q as flushGlobalEffects, s as getRootState, l as invalidate, h as reconciler, r as render, d as unmountComponentAtNode, A as useFrame, C as useGraph, x as useInstanceHandle, D as useLoader, y as useStore, z as useThree } from './index-27a1523b.esm.js';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport useMeasure from 'react-use-measure';\nimport { FiberProvider, useContextBridge } from 'its-fine';\nimport 'react-reconciler/constants';\nimport 'zustand';\nimport 'react-reconciler';\nimport 'scheduler';\nimport 'suspend-react';\n\nconst DOM_EVENTS = {\n  onClick: ['click', false],\n  onContextMenu: ['contextmenu', false],\n  onDoubleClick: ['dblclick', false],\n  onWheel: ['wheel', true],\n  onPointerDown: ['pointerdown', true],\n  onPointerUp: ['pointerup', true],\n  onPointerLeave: ['pointerleave', true],\n  onPointerMove: ['pointermove', true],\n  onPointerCancel: ['pointercancel', true],\n  onLostPointerCapture: ['lostpointercapture', true]\n};\n/** Default R3F event manager for web */\n\nfunction createPointerEvents(store) {\n  const {\n    handlePointer\n  } = createEvents(store);\n  return {\n    priority: 1,\n    enabled: true,\n\n    compute(event, state, previous) {\n      // https://github.com/pmndrs/react-three-fiber/pull/782\n      // Events trigger outside of canvas when moved, use offsetX/Y by default and allow overrides\n      state.pointer.set(event.offsetX / state.size.width * 2 - 1, -(event.offsetY / state.size.height) * 2 + 1);\n      state.raycaster.setFromCamera(state.pointer, state.camera);\n    },\n\n    connected: undefined,\n    handlers: Object.keys(DOM_EVENTS).reduce((acc, key) => ({ ...acc,\n      [key]: handlePointer(key)\n    }), {}),\n    connect: target => {\n      var _events$handlers;\n\n      const {\n        set,\n        events\n      } = store.getState();\n      events.disconnect == null ? void 0 : events.disconnect();\n      set(state => ({\n        events: { ...state.events,\n          connected: target\n        }\n      }));\n      Object.entries((_events$handlers = events.handlers) != null ? _events$handlers : []).forEach(([name, event]) => {\n        const [eventName, passive] = DOM_EVENTS[name];\n        target.addEventListener(eventName, event, {\n          passive\n        });\n      });\n    },\n    disconnect: () => {\n      const {\n        set,\n        events\n      } = store.getState();\n\n      if (events.connected) {\n        var _events$handlers2;\n\n        Object.entries((_events$handlers2 = events.handlers) != null ? _events$handlers2 : []).forEach(([name, event]) => {\n          if (events && events.connected instanceof HTMLElement) {\n            const [eventName] = DOM_EVENTS[name];\n            events.connected.removeEventListener(eventName, event);\n          }\n        });\n        set(state => ({\n          events: { ...state.events,\n            connected: undefined\n          }\n        }));\n      }\n    }\n  };\n}\n\nconst CanvasImpl = /*#__PURE__*/React.forwardRef(function Canvas({\n  children,\n  fallback,\n  resize,\n  style,\n  gl,\n  events = createPointerEvents,\n  eventSource,\n  eventPrefix,\n  shadows,\n  linear,\n  flat,\n  legacy,\n  orthographic,\n  frameloop,\n  dpr,\n  performance,\n  raycaster,\n  camera,\n  onPointerMissed,\n  onCreated,\n  ...props\n}, forwardedRef) {\n  // Create a known catalogue of Threejs-native elements\n  // This will include the entire THREE namespace by default, users can extend\n  // their own elements by using the createRoot API instead\n  React.useMemo(() => extend(THREE), []);\n  const Bridge = useContextBridge();\n  const [containerRef, containerRect] = useMeasure({\n    scroll: true,\n    debounce: {\n      scroll: 50,\n      resize: 0\n    },\n    ...resize\n  });\n  const canvasRef = React.useRef(null);\n  const divRef = React.useRef(null);\n  const [canvas, setCanvas] = React.useState(null);\n  React.useImperativeHandle(forwardedRef, () => canvasRef.current);\n  const handlePointerMissed = useMutableCallback(onPointerMissed);\n  const [block, setBlock] = React.useState(false);\n  const [error, setError] = React.useState(false); // Suspend this component if block is a promise (2nd run)\n\n  if (block) throw block; // Throw exception outwards if anything within canvas throws\n\n  if (error) throw error;\n  const root = React.useRef(null);\n\n  if (containerRect.width > 0 && containerRect.height > 0 && canvas) {\n    if (!root.current) root.current = createRoot(canvas);\n    root.current.configure({\n      gl,\n      events,\n      shadows,\n      linear,\n      flat,\n      legacy,\n      orthographic,\n      frameloop,\n      dpr,\n      performance,\n      raycaster,\n      camera,\n      size: containerRect,\n      // Pass mutable reference to onPointerMissed so it's free to update\n      onPointerMissed: (...args) => handlePointerMissed.current == null ? void 0 : handlePointerMissed.current(...args),\n      onCreated: state => {\n        // Connect to event source\n        state.events.connect == null ? void 0 : state.events.connect(eventSource ? isRef(eventSource) ? eventSource.current : eventSource : divRef.current); // Set up compute function\n\n        if (eventPrefix) {\n          state.setEvents({\n            compute: (event, state) => {\n              const x = event[eventPrefix + 'X'];\n              const y = event[eventPrefix + 'Y'];\n              state.pointer.set(x / state.size.width * 2 - 1, -(y / state.size.height) * 2 + 1);\n              state.raycaster.setFromCamera(state.pointer, state.camera);\n            }\n          });\n        } // Call onCreated callback\n\n\n        onCreated == null ? void 0 : onCreated(state);\n      }\n    });\n    root.current.render( /*#__PURE__*/React.createElement(Bridge, null, /*#__PURE__*/React.createElement(ErrorBoundary, {\n      set: setError\n    }, /*#__PURE__*/React.createElement(React.Suspense, {\n      fallback: /*#__PURE__*/React.createElement(Block, {\n        set: setBlock\n      })\n    }, children))));\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    setCanvas(canvasRef.current);\n  }, []);\n  React.useEffect(() => {\n    if (canvas) return () => unmountComponentAtNode(canvas);\n  }, [canvas]); // When the event source is not this div, we need to set pointer-events to none\n  // Or else the canvas will block events from reaching the event source\n\n  const pointerEvents = eventSource ? 'none' : 'auto';\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: divRef,\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      pointerEvents,\n      ...style\n    }\n  }, props), /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    style: {\n      width: '100%',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      display: 'block'\n    }\n  }, fallback)));\n});\n/**\n * A DOM canvas which accepts threejs elements as children.\n * @see https://docs.pmnd.rs/react-three-fiber/api/canvas\n */\n\nconst Canvas = /*#__PURE__*/React.forwardRef(function CanvasWrapper(props, ref) {\n  return /*#__PURE__*/React.createElement(FiberProvider, null, /*#__PURE__*/React.createElement(CanvasImpl, _extends({}, props, {\n    ref: ref\n  })));\n});\n\nexport { Canvas, createPointerEvents as events };\n"]},"metadata":{},"sourceType":"module"}