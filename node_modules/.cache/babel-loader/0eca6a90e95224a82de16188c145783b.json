{"ast":null,"code":"import * as React from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { Object3D, Matrix4, Quaternion, Vector3 } from 'three';\nimport { OrthographicCamera } from './OrthographicCamera.js';\nimport { Hud } from './Hud.js';\nconst Context = /*#__PURE__*/React.createContext({});\n\nconst useGizmoContext = () => {\n  return React.useContext(Context);\n};\n\nconst turnRate = 2 * Math.PI; // turn rate in angles per second\n\nconst dummy = new Object3D();\nconst matrix = new Matrix4();\nconst [q1, q2] = [new Quaternion(), new Quaternion()];\nconst target = new Vector3();\nconst targetPosition = new Vector3();\n\nconst isOrbitControls = controls => {\n  return 'minPolarAngle' in controls;\n};\n\nconst GizmoHelper = ({\n  alignment = 'bottom-right',\n  margin = [80, 80],\n  renderPriority = 1,\n  onUpdate,\n  onTarget,\n  children\n}) => {\n  const size = useThree(state => state.size);\n  const mainCamera = useThree(state => state.camera); // @ts-ignore\n\n  const defaultControls = useThree(state => state.controls);\n  const invalidate = useThree(state => state.invalidate);\n  const gizmoRef = React.useRef();\n  const virtualCam = React.useRef(null);\n  const animating = React.useRef(false);\n  const radius = React.useRef(0);\n  const focusPoint = React.useRef(new Vector3(0, 0, 0));\n  const defaultUp = React.useRef(new Vector3(0, 0, 0));\n  React.useEffect(() => {\n    defaultUp.current.copy(mainCamera.up);\n  }, [mainCamera]);\n  const tweenCamera = React.useCallback(direction => {\n    animating.current = true;\n    if (defaultControls || onTarget) focusPoint.current = (defaultControls == null ? void 0 : defaultControls.target) || (onTarget == null ? void 0 : onTarget());\n    radius.current = mainCamera.position.distanceTo(target); // Rotate from current camera orientation\n\n    q1.copy(mainCamera.quaternion); // To new current camera orientation\n\n    targetPosition.copy(direction).multiplyScalar(radius.current).add(target);\n    dummy.lookAt(targetPosition);\n    q2.copy(dummy.quaternion);\n    invalidate();\n  }, [defaultControls, mainCamera, onTarget, invalidate]);\n  useFrame((_, delta) => {\n    if (virtualCam.current && gizmoRef.current) {\n      var _gizmoRef$current; // Animate step\n\n\n      if (animating.current) {\n        if (q1.angleTo(q2) < 0.01) {\n          animating.current = false; // Orbit controls uses UP vector as the orbit axes,\n          // so we need to reset it after the animation is done\n          // moving it around for the controls to work correctly\n\n          if (isOrbitControls(defaultControls)) {\n            mainCamera.up.copy(defaultUp.current);\n          }\n        } else {\n          const step = delta * turnRate; // animate position by doing a slerp and then scaling the position on the unit sphere\n\n          q1.rotateTowards(q2, step); // animate orientation\n\n          mainCamera.position.set(0, 0, 1).applyQuaternion(q1).multiplyScalar(radius.current).add(focusPoint.current);\n          mainCamera.up.set(0, 1, 0).applyQuaternion(q1).normalize();\n          mainCamera.quaternion.copy(q1);\n          if (onUpdate) onUpdate();else if (defaultControls) defaultControls.update();\n          invalidate();\n        }\n      } // Sync Gizmo with main camera orientation\n\n\n      matrix.copy(mainCamera.matrix).invert();\n      (_gizmoRef$current = gizmoRef.current) == null ? void 0 : _gizmoRef$current.quaternion.setFromRotationMatrix(matrix);\n    }\n  });\n  const gizmoHelperContext = React.useMemo(() => ({\n    tweenCamera\n  }), [tweenCamera]); // Position gizmo component within scene\n\n  const [marginX, marginY] = margin;\n  const x = alignment.endsWith('-center') ? 0 : alignment.endsWith('-left') ? -size.width / 2 + marginX : size.width / 2 - marginX;\n  const y = alignment.startsWith('center-') ? 0 : alignment.startsWith('top-') ? size.height / 2 - marginY : -size.height / 2 + marginY;\n  return /*#__PURE__*/React.createElement(Hud, {\n    renderPriority: renderPriority\n  }, /*#__PURE__*/React.createElement(Context.Provider, {\n    value: gizmoHelperContext\n  }, /*#__PURE__*/React.createElement(OrthographicCamera, {\n    makeDefault: true,\n    ref: virtualCam,\n    position: [0, 0, 200]\n  }), /*#__PURE__*/React.createElement(\"group\", {\n    ref: gizmoRef,\n    position: [x, y, 0]\n  }, children)));\n};\n\nexport { GizmoHelper, useGizmoContext };","map":{"version":3,"sources":["/Users/osamakhan/Desktop/Apple-Website-Clone-React-master/node_modules/@react-three/drei/core/GizmoHelper.js"],"names":["React","useThree","useFrame","Object3D","Matrix4","Quaternion","Vector3","OrthographicCamera","Hud","Context","createContext","useGizmoContext","useContext","turnRate","Math","PI","dummy","matrix","q1","q2","target","targetPosition","isOrbitControls","controls","GizmoHelper","alignment","margin","renderPriority","onUpdate","onTarget","children","size","state","mainCamera","camera","defaultControls","invalidate","gizmoRef","useRef","virtualCam","animating","radius","focusPoint","defaultUp","useEffect","current","copy","up","tweenCamera","useCallback","direction","position","distanceTo","quaternion","multiplyScalar","add","lookAt","_","delta","_gizmoRef$current","angleTo","step","rotateTowards","set","applyQuaternion","normalize","update","invert","setFromRotationMatrix","gizmoHelperContext","useMemo","marginX","marginY","x","endsWith","width","y","startsWith","height","createElement","Provider","value","makeDefault","ref"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { Object3D, Matrix4, Quaternion, Vector3 } from 'three';\nimport { OrthographicCamera } from './OrthographicCamera.js';\nimport { Hud } from './Hud.js';\n\nconst Context = /*#__PURE__*/React.createContext({});\nconst useGizmoContext = () => {\n  return React.useContext(Context);\n};\nconst turnRate = 2 * Math.PI; // turn rate in angles per second\n\nconst dummy = new Object3D();\nconst matrix = new Matrix4();\nconst [q1, q2] = [new Quaternion(), new Quaternion()];\nconst target = new Vector3();\nconst targetPosition = new Vector3();\n\nconst isOrbitControls = controls => {\n  return 'minPolarAngle' in controls;\n};\n\nconst GizmoHelper = ({\n  alignment = 'bottom-right',\n  margin = [80, 80],\n  renderPriority = 1,\n  onUpdate,\n  onTarget,\n  children\n}) => {\n  const size = useThree(state => state.size);\n  const mainCamera = useThree(state => state.camera); // @ts-ignore\n\n  const defaultControls = useThree(state => state.controls);\n  const invalidate = useThree(state => state.invalidate);\n  const gizmoRef = React.useRef();\n  const virtualCam = React.useRef(null);\n  const animating = React.useRef(false);\n  const radius = React.useRef(0);\n  const focusPoint = React.useRef(new Vector3(0, 0, 0));\n  const defaultUp = React.useRef(new Vector3(0, 0, 0));\n  React.useEffect(() => {\n    defaultUp.current.copy(mainCamera.up);\n  }, [mainCamera]);\n  const tweenCamera = React.useCallback(direction => {\n    animating.current = true;\n    if (defaultControls || onTarget) focusPoint.current = (defaultControls == null ? void 0 : defaultControls.target) || (onTarget == null ? void 0 : onTarget());\n    radius.current = mainCamera.position.distanceTo(target); // Rotate from current camera orientation\n\n    q1.copy(mainCamera.quaternion); // To new current camera orientation\n\n    targetPosition.copy(direction).multiplyScalar(radius.current).add(target);\n    dummy.lookAt(targetPosition);\n    q2.copy(dummy.quaternion);\n    invalidate();\n  }, [defaultControls, mainCamera, onTarget, invalidate]);\n  useFrame((_, delta) => {\n    if (virtualCam.current && gizmoRef.current) {\n      var _gizmoRef$current;\n\n      // Animate step\n      if (animating.current) {\n        if (q1.angleTo(q2) < 0.01) {\n          animating.current = false; // Orbit controls uses UP vector as the orbit axes,\n          // so we need to reset it after the animation is done\n          // moving it around for the controls to work correctly\n\n          if (isOrbitControls(defaultControls)) {\n            mainCamera.up.copy(defaultUp.current);\n          }\n        } else {\n          const step = delta * turnRate; // animate position by doing a slerp and then scaling the position on the unit sphere\n\n          q1.rotateTowards(q2, step); // animate orientation\n\n          mainCamera.position.set(0, 0, 1).applyQuaternion(q1).multiplyScalar(radius.current).add(focusPoint.current);\n          mainCamera.up.set(0, 1, 0).applyQuaternion(q1).normalize();\n          mainCamera.quaternion.copy(q1);\n          if (onUpdate) onUpdate();else if (defaultControls) defaultControls.update();\n          invalidate();\n        }\n      } // Sync Gizmo with main camera orientation\n\n\n      matrix.copy(mainCamera.matrix).invert();\n      (_gizmoRef$current = gizmoRef.current) == null ? void 0 : _gizmoRef$current.quaternion.setFromRotationMatrix(matrix);\n    }\n  });\n  const gizmoHelperContext = React.useMemo(() => ({\n    tweenCamera\n  }), [tweenCamera]); // Position gizmo component within scene\n\n  const [marginX, marginY] = margin;\n  const x = alignment.endsWith('-center') ? 0 : alignment.endsWith('-left') ? -size.width / 2 + marginX : size.width / 2 - marginX;\n  const y = alignment.startsWith('center-') ? 0 : alignment.startsWith('top-') ? size.height / 2 - marginY : -size.height / 2 + marginY;\n  return /*#__PURE__*/React.createElement(Hud, {\n    renderPriority: renderPriority\n  }, /*#__PURE__*/React.createElement(Context.Provider, {\n    value: gizmoHelperContext\n  }, /*#__PURE__*/React.createElement(OrthographicCamera, {\n    makeDefault: true,\n    ref: virtualCam,\n    position: [0, 0, 200]\n  }), /*#__PURE__*/React.createElement(\"group\", {\n    ref: gizmoRef,\n    position: [x, y, 0]\n  }, children)));\n};\n\nexport { GizmoHelper, useGizmoContext };\n"]},"metadata":{},"sourceType":"module"}